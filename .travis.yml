language: c
os:
  - osx
env:
  global:
    # Travis CI sets CC to gcc-4.2, which is ungood for building Asterisk
    - CC=
  matrix:
    - CLANG=--with-clang
    - CLANG=
before_install:
  - env
  - brew update
  - brew upgrade
  - brew ls
install:
  - brew tap leedm777/homebrew-asterisk
script:
  # Current version
  - brew install ./asterisk.rb --verbose --with-dev-mode ${CLANG}
  # Current release branch
  - brew install ./asterisk.rb --verbose --with-dev-mode --devel ${CLANG}
  # Next release branch
  - brew install ./asterisk.rb --verbose --with-dev-mode --HEAD ${CLANG}
